<?xml version="1.0" encoding="utf-8" ?>
<toolkit:Popup 
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
    xmlns:viewmodels="clr-namespace:RecipeApp.Mobile.ViewModels"
    x:Class="RecipeApp.Mobile.Components.Popups.LanguageSelectionPopup"
    x:DataType="viewmodels:LanguageSelectionPopupViewModel"
    HorizontalOptions="Center"
    VerticalOptions="Center">

    <Border 
        BackgroundColor="White"
        StrokeThickness="1"
        Stroke="LightGray"
        MinimumWidthRequest="300"
        MaximumWidthRequest="400">
        
        <Border.StrokeShape>
            <RoundRectangle CornerRadius="12" />
        </Border.StrokeShape>

        <Border.Shadow>
            <Shadow Brush="Black" 
                    Opacity="0.3" 
                    Radius="10" 
                    Offset="0,2" />
        </Border.Shadow>

        <StackLayout Padding="20" Spacing="15">
            
            <!-- Header -->
            <Label 
                Text="{Binding Title}"
                FontSize="18"
                FontAttributes="Bold"
                HorizontalOptions="Center"
                TextColor="Black" />
            
            <!-- Current Selection Display -->
            <Label 
                Text="{Binding SelectedLanguage, StringFormat='Current: {0}'}"
                FontSize="14"
                HorizontalOptions="Center"
                TextColor="Gray" />
            
            <!-- English Option -->
            <Border 
                BackgroundColor="White"
                StrokeThickness="1"
                Stroke="LightGray"
                Padding="15,10">
                
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="8" />
                </Border.StrokeShape>
                
                <Border.GestureRecognizers>
                    <TapGestureRecognizer 
                        Command="{Binding SelectLanguageCommand}"
                        CommandParameter="en" />
                </Border.GestureRecognizers>
                
                <Grid ColumnDefinitions="Auto,*,Auto">
                    <Label 
                        Text="ðŸ‡ºðŸ‡¸"
                        FontSize="24"
                        VerticalOptions="Center"
                        Grid.Column="0" />
                    
                    <Label 
                        Text="English"
                        FontSize="16"
                        VerticalOptions="Center"
                        HorizontalOptions="Start"
                        TextColor="Black"
                        Margin="10,0,0,0"
                        Grid.Column="1" />
                    
                    <Label 
                        Text="âœ“"
                        FontSize="20"
                        TextColor="#2196F3"
                        FontAttributes="Bold"
                        VerticalOptions="Center"
                        Grid.Column="2"
                        IsVisible="{Binding IsEnglishSelected}" />
                </Grid>
            </Border>
            
            <!-- Vietnamese Option -->
            <Border 
                BackgroundColor="White"
                StrokeThickness="1"
                Stroke="LightGray"
                Padding="15,10">
                
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="8" />
                </Border.StrokeShape>
                
                <Border.GestureRecognizers>
                    <TapGestureRecognizer 
                        Command="{Binding SelectLanguageCommand}"
                        CommandParameter="vi" />
                </Border.GestureRecognizers>
                
                <Grid ColumnDefinitions="Auto,*,Auto">
                    <Label 
                        Text="ðŸ‡»ðŸ‡³"
                        FontSize="24"
                        VerticalOptions="Center"
                        Grid.Column="0" />
                    
                    <Label 
                        Text="Tiáº¿ng Viá»‡t"
                        FontSize="16"
                        VerticalOptions="Center"
                        HorizontalOptions="Start"
                        TextColor="Black"
                        Margin="10,0,0,0"
                        Grid.Column="1" />
                    
                    <Label 
                        Text="âœ“"
                        FontSize="20"
                        TextColor="#2196F3"
                        FontAttributes="Bold"
                        VerticalOptions="Center"
                        Grid.Column="2"
                        IsVisible="{Binding IsVietnameseSelected}" />
                </Grid>
            </Border>
            
            <!-- Buttons -->
            <Grid ColumnDefinitions="*,*" ColumnSpacing="10" Margin="0,10,0,0">
                
                <!-- Cancel Button -->
                <Button 
                    Text="Cancel"
                    Command="{Binding CancelCommand}"
                    BackgroundColor="LightGray"
                    TextColor="Black"
                    CornerRadius="8"
                    Grid.Column="0" />
                
                <!-- Confirm Button -->
                <Button 
                    Text="Confirm"
                    Command="{Binding ConfirmSelectionCommand}"
                    BackgroundColor="#007ACC"
                    TextColor="White"
                    CornerRadius="8"
                    Grid.Column="1" />
                
            </Grid>
            
        </StackLayout>
        
    </Border>
    
</toolkit:Popup>
